<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Life Insurance Solutions</title>
    <!-- Tailwind CSS for styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6;
            color: #1f2937;
        }
        .container {
            max-width: 64rem; /* Custom container width */
        }
        .section-title {
            position: relative;
            padding-bottom: 0.75rem;
            margin-bottom: 2rem;
            font-size: 2rem; /* Adjusted for better hierarchy */
            font-weight: 700;
        }
        .section-title::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 5rem;
            height: 3px;
            background-color: #4f46e5;
            border-radius: 9999px;
        }
        /* Custom styles for section fade-in animation */
        .fade-in-section {
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.6s ease-out, transform 0.6s ease-out;
        }
        .fade-in-section.is-visible {
            opacity: 1;
            transform: translateY(0);
        }
        /* Custom styles for form inputs and buttons for subtle transitions */
        input:focus, textarea:focus {
            outline: 2px solid transparent;
            outline-offset: 2px;
            box-shadow: 0 0 0 2px #fff, 0 0 0 4px #4f46e5;
            transition: all 0.2s ease-in-out;
        }
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        }
        .btn-primary:active {
            transform: translateY(0);
        }
        .card:hover {
            transform: translateY(-4px) scale(1.01);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }

        .spinner {
            border: 4px solid rgba(0, 0, 0, 0.1);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            border-left-color: #4f46e5;
            animation: spin 1s ease infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body class="min-h-screen flex flex-col items-center py-10 px-4 sm:px-6 lg:px-8">

    <!-- Mobile Navigation Menu -->
    <nav class="md:hidden fixed top-0 left-0 right-0 z-50 bg-white shadow-md rounded-b-lg">
        <div class="flex justify-between items-center p-4">
            <h1 class="text-xl font-bold text-indigo-600">Insurance Solutions</h1>
            <button id="menu-toggle" class="text-gray-800 focus:outline-none">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path>
                </svg>
            </button>
        </div>
        <div id="mobile-menu" class="hidden flex flex-col p-4 bg-white border-t border-gray-200">
            <a href="#calculator" class="py-2 text-gray-700 hover:text-indigo-600">Calculator</a>
            <a href="#policy-comparison" class="py-2 text-gray-700 hover:text-indigo-600">Compare Policies</a>
            <a href="#faq" class="py-2 text-gray-700 hover:text-indigo-600">FAQs</a>
            <a href="#glossary" class="py-2 text-gray-700 hover:text-indigo-600">Glossary</a>
            <a href="#contact" class="py-2 text-gray-700 hover:text-indigo-600">Contact Us</a>
        </div>
    </nav>
    
    <!-- Header Section -->
    <header class="w-full container mb-12 text-center">
        <h1 class="text-4xl sm:text-5xl font-extrabold text-gray-900 mb-2 tracking-tight">Your Life Insurance Solutions</h1>
        <p class="text-lg text-gray-600">Secure your family's financial future with our tailored advice.</p>
        <div class="mt-6">
            <a href="#contact" class="inline-flex justify-center py-3 px-8 border border-transparent shadow-sm text-base font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-colors duration-200">
                Get a Quote
            </a>
        </div>
    </header>

    <!-- Main Content Sections -->
    <main class="w-full container flex flex-col gap-12">

        <!-- Calculator Card -->
        <section id="calculator" class="bg-white p-6 sm:p-8 rounded-2xl shadow-xl transition-transform transform hover:scale-105 fade-in-section">
            <div class="text-center mb-8">
                <h2 class="text-2xl sm:text-3xl font-bold text-gray-800 mb-2 section-title">Life Insurance Needs Calculator</h2>
                <p class="text-sm sm:text-base text-gray-500">Enter your information below to get a detailed estimate of your life insurance needs.</p>
            </div>

            <!-- Calculator Form -->
            <form id="calculator-form" class="grid grid-cols-1 sm:grid-cols-2 gap-6">
                <!-- Annual Income -->
                <div>
                    <label for="annual-income" class="block text-sm font-medium text-gray-700">Annual Income ($)</label>
                    <span class="block text-xs text-gray-500 mt-1">Your gross annual salary before taxes.</span>
                    <input type="number" id="annual-income" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm p-2 transition-colors duration-200" placeholder="e.g., 75000">
                </div>

                <!-- Number of Children -->
                <div>
                    <label for="num-children" class="block text-sm font-medium text-gray-700">Number of Children</label>
                    <span class="block text-xs text-gray-500 mt-1">The number of children you have.</span>
                    <input type="number" id="num-children" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm p-2 transition-colors duration-200" placeholder="e.g., 2">
                </div>

                <!-- Age of Youngest Dependent -->
                <div>
                    <label for="dependent-age" class="block text-sm font-medium text-gray-700">Age of Youngest Dependent (years)</label>
                    <span class="block text-xs text-gray-500 mt-1">The age of your youngest child or dependent.</span>
                    <input type="number" id="dependent-age" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm p-2 transition-colors duration-200" placeholder="e.g., 5">
                </div>

                <!-- Debt (Mortgage, etc.) -->
                <div>
                    <label for="debt" class="block text-sm font-medium text-gray-700">Total Debt (Mortgage, loans, etc.) ($)</label>
                    <span class="block text-xs text-gray-500 mt-1">The total amount of your outstanding debts like a mortgage, car loan, or credit card debt.</span>
                    <input type="number" id="debt" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm p-2 transition-colors duration-200" placeholder="e.g., 200000">
                </div>

                <!-- Children's Education -->
                <div>
                    <label for="education-cost" class="block text-sm font-medium text-gray-700">Children's Education Costs ($)</label>
                    <span class="block text-xs text-gray-500 mt-1">Estimate of future college or private school costs.</span>
                    <input type="number" id="education-cost" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm p-2 transition-colors duration-200" placeholder="e.g., 150000">
                </div>

                <!-- Final Expenses -->
                <div>
                    <label for="final-expenses" class="block text-sm font-medium text-gray-700">Final Expenses (Burial, medical, etc.) ($)</label>
                    <span class="block text-xs text-gray-500 mt-1">Estimated costs for funeral, burial, or outstanding medical bills.</span>
                    <input type="number" id="final-expenses" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm p-2 transition-colors duration-200" placeholder="e.g., 20000">
                </div>
                
                <!-- Future Major Costs -->
                <div>
                    <label for="future-costs" class="block text-sm font-medium text-gray-700">Future Major Costs ($)</label>
                    <span class="block text-xs text-gray-500 mt-1">Include large one-time expenses, such as a future wedding or a down payment on a home.</span>
                    <input type="number" id="future-costs" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm p-2 transition-colors duration-200" placeholder="e.g., 50000">
                </div>
                
                <!-- Existing Life Insurance -->
                <div>
                    <label for="existing-insurance" class="block text-sm font-medium text-gray-700">Existing Life Insurance ($)</label>
                    <span class="block text-xs text-gray-500 mt-1">The total amount of any existing life insurance policies you currently have.</span>
                    <input type="number" id="existing-insurance" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm p-2 transition-colors duration-200" placeholder="e.g., 50000">
                </div>

                <!-- Current Savings & Investments -->
                <div>
                    <label for="savings" class="block text-sm font-medium text-gray-700">Current Savings & Investments ($)</label>
                    <span class="block text-xs text-gray-500 mt-1">Total value of your savings accounts, retirement funds, and other investments.</span>
                    <input type="number" id="savings" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm p-2 transition-colors duration-200" placeholder="e.g., 30000">
                </div>

                <!-- Spouse's Expected Income -->
                <div>
                    <label for="spouse-income" class="block text-sm font-medium text-gray-700">Spouse's Expected Income ($ per year)</label>
                    <span class="block text-xs text-gray-500 mt-1">The anticipated annual income your spouse or partner would continue to earn.</span>
                    <input type="number" id="spouse-income" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm p-2 transition-colors duration-200" placeholder="e.g., 40000">
                </div>

                <!-- Anticipated Other Lump Sums -->
                <div>
                    <label for="other-lump-sums" class="block text-sm font-medium text-gray-700">Anticipated Other Lump Sums ($)</label>
                    <span class="block text-xs text-gray-500 mt-1">Include any other one-time payments, like a pension payout or Social Security benefits.</span>
                    <input type="number" id="other-lump-sums" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm p-2 transition-colors duration-200" placeholder="e.g., 10000">
                </div>
            </form>

            <!-- Buttons to trigger calculation and AI analysis -->
            <div class="mt-8 text-center flex flex-col sm:flex-row justify-center space-y-4 sm:space-y-0 sm:space-x-4">
                <button id="calculate-btn" type="button" class="btn-primary inline-flex justify-center py-3 px-6 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-colors duration-200">
                    Calculate My Needs
                </button>
                <button id="analyze-btn" type="button" class="btn-primary inline-flex justify-center py-3 px-6 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 transition-colors duration-200">
                    ✨ Get a Detailed Analysis ✨
                </button>
            </div>

            <!-- Result Display Area -->
            <div id="result-container" class="mt-8 p-6 bg-gray-100 rounded-lg shadow-inner opacity-0 transition-opacity duration-500 ease-in-out hidden">
                <h3 class="text-lg font-bold text-gray-800 mb-2 text-center">Your Estimated Need:</h3>
                <p id="result-text" class="text-3xl font-bold text-indigo-600 text-center"></p>
                <div class="mt-4 text-center">
                    <button id="get-quote-btn" type="button" class="btn-primary inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-500 hover:bg-indigo-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-400 transition-colors duration-200">
                        Get a Quote for this amount
                    </button>
                </div>
            </div>

            <!-- AI Analysis Display Area -->
            <div id="analysis-container" class="mt-8 p-6 bg-gray-100 rounded-lg shadow-inner opacity-0 transition-opacity duration-500 ease-in-out hidden">
                <h3 class="text-lg font-bold text-gray-800 mb-4 text-center">Your Personalized Analysis</h3>
                <div id="analysis-content" class="text-gray-700 prose max-w-none"></div>
                <div id="analysis-loading" class="flex justify-center items-center mt-4 hidden">
                    <div class="spinner"></div>
                </div>
            </div>

            <!-- Message Box for errors or confirmation -->
            <div id="message-box" class="mt-4 p-4 rounded-md text-sm text-red-700 bg-red-100 hidden" role="alert">
                <p id="message-text"></p>
            </div>
        </section>

        <!-- Policy Comparison Section - Updated with more details -->
        <section id="policy-comparison" class="bg-white p-6 sm:p-8 rounded-2xl shadow-xl fade-in-section">
            <div class="text-center mb-8">
                <h2 class="text-2xl sm:text-3xl font-bold text-gray-800 mb-2 section-title">Compare Policy Types</h2>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                <!-- Term Life Policy Card -->
                <div class="bg-gray-50 p-6 rounded-lg shadow-md hover:bg-gray-100 transition-transform duration-200 card">
                    <h3 class="text-xl font-bold text-gray-900 mb-2">Term Life</h3>
                    <p class="text-sm text-gray-600 mb-4">Term life insurance is the most straightforward and affordable type of life insurance. It provides coverage for a specific period of time, such as 10, 20, or 30 years. If you pass away within that term, your beneficiaries receive the death benefit. If the term expires and you are still living, the policy ends with no value.</p>
                    <ul class="text-sm text-gray-700 space-y-2 list-disc list-inside">
                        <li>**Duration:** A fixed period of time (e.g., 10, 20, or 30 years).</li>
                        <li>**Cash Value:** Does not build cash value.</li>
                        <li>**Cost:** Typically the lowest premium for a given death benefit.</li>
                        <li>**Best for:** Young families, covering a mortgage, or other short-term financial needs.</li>
                    </ul>
                </div>

                <!-- Whole Life Policy Card -->
                <div class="bg-gray-50 p-6 rounded-lg shadow-md hover:bg-gray-100 transition-transform duration-200 card">
                    <h3 class="text-xl font-bold text-gray-900 mb-2">Whole Life</h3>
                    <p class="text-sm text-gray-600 mb-4">Whole life insurance is a type of permanent life insurance. It provides lifelong coverage and includes a savings component, known as cash value, which grows at a guaranteed rate. The premiums remain the same for the entire life of the policy.</p>
                    <ul class="text-sm text-gray-700 space-y-2 list-disc list-inside">
                        <li>**Duration:** Lifelong coverage.</li>
                        <li>**Cash Value:** Builds a guaranteed cash value that you can borrow against.</li>
                        <li>**Cost:** Higher, fixed premiums.</li>
                        <li>**Best for:** Estate planning, long-term financial goals, or a stable investment.</li>
                    </ul>
                </div>

                <!-- Universal Life Policy Card -->
                <div class="bg-gray-50 p-6 rounded-lg shadow-md hover:bg-gray-100 transition-transform duration-200 card">
                    <h3 class="text-xl font-bold text-gray-900 mb-2">Universal Life</h3>
                    <p class="text-sm text-gray-600 mb-4">Universal life insurance is a flexible type of permanent life insurance. It offers lifelong coverage and a cash value component. However, unlike whole life, it allows you to vary your premium payments within certain limits and gives you more control over the death benefit.</p>
                    <ul class="text-sm text-gray-700 space-y-2 list-disc list-inside">
                        <li>**Duration:** Lifelong coverage.</li>
                        <li>**Cash Value:** Builds cash value that can be used to pay premiums.</li>
                        <li>**Cost:** Flexible premiums, allowing you to pay more or less as needed.</li>
                        <li>**Best for:** Those who need flexibility with their premium payments and death benefit.</li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- FAQ & Glossary Section -->
        <section class="bg-white p-6 sm:p-8 rounded-2xl shadow-xl fade-in-section">
            <div class="text-center mb-8">
                <h2 class="text-2xl sm:text-3xl font-bold text-gray-800 mb-2 section-title">Information Center</h2>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <!-- FAQ Section -->
                <div id="faq" class="bg-gray-50 p-6 rounded-lg shadow-md">
                    <h3 class="text-xl sm:text-2xl font-bold text-gray-800 mb-4">Frequently Asked Questions</h3>
                    <div class="space-y-6">
                        <!-- FAQ Item 1 -->
                        <div>
                            <h4 class="font-semibold text-gray-800 mb-1">What is life insurance?</h4>
                            <p class="text-gray-600">Life insurance is a contract between you and an insurance company. In exchange for premium payments, the insurance company will pay a lump-sum amount, known as a death benefit, to your beneficiaries upon your death.</p>
                        </div>
                        <!-- FAQ Item 2 -->
                        <div>
                            <h4 class="font-semibold text-gray-800 mb-1">How much life insurance do I need?</h4>
                            <p class="text-gray-600">The amount of life insurance you need depends on several factors, including your income, debts, number of dependents, and future financial obligations. Our calculator can provide a helpful starting point, but a personalized consultation is always recommended.</p>
                        </div>
                        <!-- FAQ Item 3 -->
                        <div>
                            <h4 class="font-semibold text-gray-800 mb-1">What is the difference between term and permanent life insurance?</h4>
                            <p class="text-gray-600">Term life insurance provides coverage for a specific period of time (the "term"), while permanent life insurance provides lifelong coverage and includes a cash value component that grows over time.</p>
                        </div>
                    </div>
                </div>

                <!-- Glossary Section -->
                <div id="glossary" class="bg-gray-50 p-6 rounded-lg shadow-md">
                    <h3 class="text-xl sm:text-2xl font-bold text-gray-800 mb-4">Glossary of Terms</h3>
                    <div class="space-y-6">
                        <!-- Glossary Item 1 -->
                        <div>
                            <h4 class="font-semibold text-gray-800 mb-1">Beneficiary</h4>
                            <p class="text-gray-600">The person or entity designated to receive the death benefit upon the death of the insured.</p>
                        </div>
                        <!-- Glossary Item 2 -->
                        <div>
                            <h4 class="font-semibold text-gray-800 mb-1">Cash Value</h4>
                            <p class="text-gray-600">A savings component of a permanent life insurance policy that grows over time on a tax-deferred basis.</p>
                        </div>
                        <!-- Glossary Item 3 -->
                        <div>
                            <h4 class="font-semibold text-gray-800 mb-1">Death Benefit</h4>
                            <p class="text-gray-600">The tax-free money paid by the insurance company to the beneficiary upon the death of the insured.</p>
                        </div>
                        <!-- Glossary Item 4 -->
                        <div>
                            <h4 class="font-semibold text-gray-800 mb-1">Policy</h4>
                            <p class="text-gray-600">The contract between the policy owner and the insurance company.</p>
                        </div>
                        <!-- Glossary Item 5 -->
                        <div>
                            <h4 class="font-semibold text-gray-800 mb-1">Premium</h4>
                            <p class="text-gray-600">The regular payment required to keep a life insurance policy in effect.</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Contact Us Section -->
        <section id="contact" class="bg-white p-6 sm:p-8 rounded-2xl shadow-xl fade-in-section">
            <div class="text-center mb-8">
                <h2 class="text-2xl sm:text-3xl font-bold text-gray-800 mb-2 section-title">Contact Us</h2>
                <p class="text-sm text-gray-500">Fill out the form below to get in touch with an agent.</p>
            </div>
            <form id="contact-form" action="https://formspree.io/f/xandyaer" method="POST" class="space-y-6">
                <div>
                    <label for="name" class="block text-sm font-medium text-gray-700">Name</label>
                    <input type="text" id="name" name="name" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm p-2">
                </div>
                <div>
                    <label for="email" class="block text-sm font-medium text-gray-700">Email</label>
                    <input type="email" id="email" name="email" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm p-2">
                </div>
                <div>
                    <label for="quote-message" class="block text-sm font-medium text-gray-700">Quote Request</label>
                    <textarea id="quote-message" name="quote-message" rows="4" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm p-2" placeholder="Tell us more about your needs or paste your calculator results here."></textarea>
                </div>
                <div class="text-center">
                    <button type="submit" class="btn-primary inline-flex justify-center py-3 px-8 border border-transparent shadow-sm text-base font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-colors duration-200">
                        Send Message
                    </button>
                </div>
            </form>
        </section>
    </main>

    <!-- Footer with Social Media Links -->
    <footer class="w-full container mt-12 text-center text-gray-500 text-sm">
        <p class="mb-2">&copy; 2024 Your Life Insurance Solutions. All rights reserved.</p>
        <div class="flex justify-center space-x-4">
            <a href="#" class="hover:text-gray-800 transition-colors duration-200">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M12 0c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm-2 16h-2v-6h2v6zm-2-7c-.828 0-1.5-.672-1.5-1.5s.672-1.5 1.5-1.5 1.5.672 1.5 1.5-.672 1.5-1.5 1.5zm13 7h-2v-3.5c0-1.213-.987-2.5-2.5-2.5s-2.5 1.287-2.5 2.5v3.5h-2v-6h2v1.723c.691-1.21 2.046-1.723 3-1.723 1.988 0 4 1.742 4 4.5v3.5z" />
                </svg>
            </a>
            <a href="#" class="hover:text-gray-800 transition-colors duration-200">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M12 0c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm6 11.229c0 3.109-2.222 5.617-5 5.617-1.125 0-2.164-.403-2.924-1.127l-.022-1.282c.484.095.968.143 1.488.143 2.029 0 3.791-1.391 4.593-3.053l.006.006c-.461 1.776-2.146 3.123-4.14 3.123-2.617 0-4.739-2.122-4.739-4.74 0-2.617 2.122-4.739 4.739-4.739 1.481 0 2.8.694 3.665 1.792l.006-.006c.697-.84 1.157-1.841 1.344-2.946-1.071-.784-2.39-1.238-3.792-1.238-3.618 0-6.549 2.932-6.549 6.549 0 3.618 2.931 6.549 6.549 6.549 3.016 0 5.518-2.048 6.36-4.996.004.002.007.005.011.007z" />
                </svg>
            </a>
        </div>
    </footer>

    <script>
        // Get references to all the input fields and elements
        const annualIncomeInput = document.getElementById('annual-income');
        const numChildrenInput = document.getElementById('num-children');
        const dependentAgeInput = document.getElementById('dependent-age');
        const debtInput = document.getElementById('debt');
        const educationCostInput = document.getElementById('education-cost');
        const finalExpensesInput = document.getElementById('final-expenses');
        const futureCostsInput = document.getElementById('future-costs');
        const existingInsuranceInput = document.getElementById('existing-insurance');
        const savingsInput = document.getElementById('savings');
        const spouseIncomeInput = document.getElementById('spouse-income');
        const otherLumpSumsInput = document.getElementById('other-lump-sums');
        const calculateBtn = document.getElementById('calculate-btn');
        const analyzeBtn = document.getElementById('analyze-btn');
        const getQuoteBtn = document.getElementById('get-quote-btn');
        const resultContainer = document.getElementById('result-container');
        const resultText = document.getElementById('result-text');
        const messageBox = document.getElementById('message-box');
        const messageText = document.getElementById('message-text');
        const analysisContainer = document.getElementById('analysis-container');
        const analysisContent = document.getElementById('analysis-content');
        const analysisLoading = document.getElementById('analysis-loading');
        const contactFormMessage = document.getElementById('quote-message');

        // Mobile menu toggle
        const menuToggle = document.getElementById('menu-toggle');
        const mobileMenu = document.getElementById('mobile-menu');

        menuToggle.addEventListener('click', () => {
            mobileMenu.classList.toggle('hidden');
        });

        // Close menu when a link is clicked
        mobileMenu.querySelectorAll('a').forEach(link => {
            link.addEventListener('click', () => {
                mobileMenu.classList.add('hidden');
            });
        });

        /**
         * Initializes intersection observer for fade-in animations
         */
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('is-visible');
                    observer.unobserve(entry.target);
                }
            });
        }, { threshold: 0.1 });

        // Observe all sections with the 'fade-in-section' class
        document.querySelectorAll('.fade-in-section').forEach(section => {
            observer.observe(section);
        });

        /**
         * Shows a message in the message box with a specified type.
         * @param {string} message - The message to display.
         * @param {string} type - 'error' or 'success'.
         */
        function showMessage(message, type = 'error') {
            messageText.textContent = message;
            messageBox.style.display = 'block';
            if (type === 'error') {
                messageBox.classList.remove('bg-green-100', 'text-green-700');
                messageBox.classList.add('bg-red-100', 'text-red-700');
            } else {
                messageBox.classList.remove('bg-red-100', 'text-red-700');
                messageBox.classList.add('bg-green-100', 'text-green-700');
            }
        }

        /**
         * Hides the message box.
         */
        function hideMessage() {
            messageBox.style.display = 'none';
        }

        /**
         * Validates all input fields for non-negative values and provides specific feedback.
         * @returns {boolean} True if all fields are valid, false otherwise.
         */
        function validateInputs() {
            const inputs = [
                { id: annualIncomeInput, name: 'Annual Income' },
                { id: numChildrenInput, name: 'Number of Children' },
                { id: dependentAgeInput, name: 'Age of Youngest Dependent' },
                { id: debtInput, name: 'Total Debt' },
                { id: educationCostInput, name: 'Children\'s Education Costs' },
                { id: finalExpensesInput, name: 'Final Expenses' },
                { id: futureCostsInput, name: 'Future Major Costs' },
                { id: existingInsuranceInput, name: 'Existing Life Insurance' },
                { id: savingsInput, name: 'Current Savings & Investments' },
                { id: spouseIncomeInput, name: 'Spouse\'s Expected Income' },
                { id: otherLumpSumsInput, name: 'Anticipated Other Lump Sums' }
            ];

            for (const input of inputs) {
                if (input.id.value < 0) {
                    showMessage(`Please enter a positive value for ${input.name}.`);
                    return false;
                }
            }

            return true;
        }

        /**
         * Performs the life insurance needs calculation based on user input.
         */
        function calculateNeeds() {
            hideMessage(); // Hide any previous messages
            resultContainer.classList.add('hidden', 'opacity-0');
            analysisContainer.classList.add('hidden', 'opacity-0');

            if (!validateInputs()) {
                return;
            }

            // Get the numeric values from the inputs, defaulting to 0 if empty
            const annualIncome = parseFloat(annualIncomeInput.value) || 0;
            const numChildren = parseFloat(numChildrenInput.value) || 0;
            const dependentAge = parseFloat(dependentAgeInput.value) || 0;
            const debt = parseFloat(debtInput.value) || 0;
            const educationCost = parseFloat(educationCostInput.value) || 0;
            const finalExpenses = parseFloat(finalExpensesInput.value) || 0;
            const futureCosts = parseFloat(futureCostsInput.value) || 0;
            const existingInsurance = parseFloat(existingInsuranceInput.value) || 0;
            const savings = parseFloat(savingsInput.value) || 0;
            const spouseIncome = parseFloat(spouseIncomeInput.value) || 0;
            const otherLumpSums = parseFloat(otherLumpSumsInput.value) || 0;
            
            // Calculate years of income replacement based on dependent's age. Assuming income is needed until age 22.
            const yearsToCover = Math.max(0, 22 - dependentAge);

            // Calculate total income replacement and other income
            const incomeReplacement = annualIncome * yearsToCover;
            const spouseIncomeTotal = spouseIncome * yearsToCover;

            // Calculate total financial needs, multiplying education costs by the number of children
            const totalNeeds = incomeReplacement + debt + (educationCost * numChildren) + finalExpenses + futureCosts;

            // Calculate total available resources
            const totalResources = existingInsurance + savings + spouseIncomeTotal + otherLumpSums;

            // Calculate the net life insurance need
            const netNeeds = totalNeeds - totalResources;

            const finalNetNeeds = Math.max(0, netNeeds);
            const formattedResult = new Intl.NumberFormat('en-US', {
                style: 'currency',
                currency: 'USD',
                minimumFractionDigits: 0
            }).format(finalNetNeeds);

            // Display the result with a fade-in effect and a more helpful message
            if (finalNetNeeds === 0 && netNeeds < 0) {
                resultText.innerHTML = `<span class="block text-sm text-gray-600 mb-2">Your current resources appear to exceed your family's needs.</span>${formattedResult}`;
            } else if (finalNetNeeds === 0 && netNeeds === 0) {
                 resultText.innerHTML = `<span class="block text-sm text-gray-600 mb-2">Your current resources appear to meet your family's needs.</span>${formattedResult}`;
            }
            else {
                resultText.textContent = formattedResult;
            }
            
            resultContainer.classList.remove('hidden');
            setTimeout(() => {
                resultContainer.classList.remove('opacity-0');
            }, 10);

            return finalNetNeeds; // Return the calculated value
        }

        /**
         * Populates the quote request form with the calculated net need.
         */
        function populateQuoteForm() {
            const netNeed = calculateNeeds();
            if (netNeed !== null) {
                const formattedNeed = new Intl.NumberFormat('en-US', {
                    style: 'currency',
                    currency: 'USD',
                    minimumFractionDigits: 0
                }).format(netNeed);
                contactFormMessage.value = `Hello, I'm interested in getting a quote for a life insurance policy. My estimated need is approximately ${formattedNeed}.`;
                window.location.hash = '#contact'; // Scroll to the contact form
            } else {
                showMessage("Please calculate your needs first before requesting a quote.");
            }
        }

        /**
         * Sends data to Gemini API for analysis and displays the result.
         */
        async function getAIAnalysis() {
            hideMessage();
            analysisContainer.classList.add('hidden', 'opacity-0');
            analysisLoading.classList.remove('hidden');
            analysisContainer.classList.remove('hidden');
            analysisContent.innerHTML = '';
            
            const netNeeds = calculateNeeds();
            if (netNeeds === null) {
                analysisContainer.classList.add('hidden', 'opacity-0');
                return;
            }

            // Get the numeric values from the inputs
            const annualIncome = parseFloat(annualIncomeInput.value) || 0;
            const numChildren = parseFloat(numChildrenInput.value) || 0;
            const dependentAge = parseFloat(dependentAgeInput.value) || 0;
            const debt = parseFloat(debtInput.value) || 0;
            const educationCost = parseFloat(educationCostInput.value) || 0;
            const finalExpenses = parseFloat(finalExpensesInput.value) || 0;
            const futureCosts = parseFloat(futureCostsInput.value) || 0;
            const existingInsurance = parseFloat(existingInsuranceInput.value) || 0;
            const savings = parseFloat(savingsInput.value) || 0;
            const spouseIncome = parseFloat(spouseIncomeInput.value) || 0;
            const otherLumpSums = parseFloat(otherLumpSumsInput.value) || 0;

            const yearsToCover = Math.max(0, 22 - dependentAge);
            const incomeReplacement = annualIncome * yearsToCover;
            const spouseIncomeTotal = spouseIncome * yearsToCover;
            const totalNeeds = incomeReplacement + debt + (educationCost * numChildren) + finalExpenses + futureCosts;
            const totalResources = existingInsurance + savings + spouseIncomeTotal + otherLumpSums;
            const formattedNetNeeds = new Intl.NumberFormat('en-US', {
                style: 'currency',
                currency: 'USD',
                minimumFractionDigits: 0
            }).format(Math.max(0, netNeeds));

            const prompt = `Act as a professional financial advisor specializing in life insurance. A client has provided the following information for a needs analysis:
            - Annual Income: $${annualIncome}
            - Number of Children: ${numChildren}
            - Age of Youngest Dependent: ${dependentAge} years
            - Total Debt: $${debt}
            - Children's Education Costs (per child): $${educationCost}
            - Final Expenses: $${finalExpenses}
            - Future Major Costs: $${futureCosts}
            - Existing Life Insurance: $${existingInsurance}
            - Current Savings & Investments: $${savings}
            - Spouse's Expected Income (per year): $${spouseIncome}
            - Anticipated Other Lump Sums: $${otherLumpSums}
            Based on this, their calculated life insurance need is ${formattedNetNeeds}.

            Provide a clear and concise breakdown explaining how this figure was determined. If the net need is $0, explain that the client's current resources meet or exceed their needs and that no additional insurance is required based on this calculation. Use a professional and easy-to-understand tone, using headings and bullet points for clarity.`;
            
            let chatHistory = [];
            chatHistory.push({ role: "user", parts: [{ text: prompt }] });
            const payload = { contents: chatHistory };
            const apiKey = "";
            const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${apiKey}`;

            try {
                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                if (!response.ok) {
                    throw new Error(`API call failed with status: ${response.status}`);
                }

                const result = await response.json();
                analysisLoading.classList.add('hidden');

                if (result.candidates && result.candidates.length > 0 &&
                    result.candidates[0].content && result.candidates[0].content.parts &&
                    result.candidates[0].content.parts.length > 0) {
                    const text = result.candidates[0].content.parts[0].text;
                    analysisContent.innerHTML = marked.parse(text); // Using a markdown parser for professional formatting
                    setTimeout(() => {
                        analysisContainer.classList.remove('opacity-0');
                    }, 10);
                } else {
                    analysisContent.textContent = "Sorry, I couldn't generate an analysis. Please try again.";
                    setTimeout(() => {
                        analysisContainer.classList.remove('opacity-0');
                    }, 10);
                }
            } catch (error) {
                console.error("Error fetching AI analysis:", error);
                analysisLoading.classList.add('hidden');
                analysisContent.textContent = "An error occurred while getting the analysis. Please check your network connection and try again.";
                setTimeout(() => {
                    analysisContainer.classList.remove('opacity-0');
                }, 10);
            }
        }

        // Add event listeners to the buttons
        calculateBtn.addEventListener('click', calculateNeeds);
        analyzeBtn.addEventListener('click', getAIAnalysis);
        getQuoteBtn.addEventListener('click', populateQuoteForm);

        // Load marked library for markdown parsing
        const script = document.createElement('script');
        script.src = 'https://cdn.jsdelivr.net/npm/marked/marked.min.js';
        document.head.appendChild(script);
    </script>
</body>
</html>
